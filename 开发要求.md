# 开发要求
## 任务介绍
我在做安卓开发，并研究如何利用AI来复刻公开的京东APP，但我的复刻无需100%相似，我只需要做到如下几点：
- 1、UI结构基本相似，图标做不到一模一样不要紧，类似即可。
- 2、不需要做出APP的所有页面，例如京东APP，我们只做app需实现的任务用到的典型页面就可以了，其他的页面，比如小视频、秒送页面，我们全部设置为空页面，只保留一个入口给后续开发接入，暂时不需要处理。
- 3、不需要实现动态，例如不需要实现动态数据，商品列表、店铺信息等全部固定死。
- 4、不需要数据库，但是需要保存重要的信号（这些信号我会指定），如购物车商品、订单状态
- 5、不需要登录和联网，仅为本地演示使用
- 6、开发过程，可以考虑截图给AI，让AI实现开发任务。
- 7、没有任何限制，对框架等的选取完全取决于开发者习惯
- 8、不需要通知权限等复杂的东西，至多需要下保存图片到本地、读取相册这样的权限

## 任务要求
1. 开发的时候可以采取逐步开发的策略，慢慢补充需求，慢慢新增数据字段等
2. 避免单个文件代码过长，**必须要遵循MVP模式**
3. 按照指定的页面结构、参考给定的截图作为UI设计指导
4. 严格按照已经定义好的数据结构`app\src\main\java\com\example\MyJD\model`和已有的数据`app\src\main\assets\data`
5. 按照用户要求进行开发，除非用户指定，否则不要引入新的内容。
    - 你只需要参考我给你的截图，**不要脑补**截图中各个按钮点击后会达到的效果。
    - ***截图里面的信息（例如人的名字、人的头像）不必参考***，因为我们自己预设了已有的数据`app\src\main\assets\data`
6. UI中，各个图标若找不到合适的，可以用emoji表情代替。但优先考虑`androidx.compose.material.icons.Icons, androidx.compose.material.icons.filled.AccountCircle`等
7. 严禁执行删除文件等危险操作。
8. 每当你修改完代码，记得更新`README.md`文件，并且确定build正常了再交付给我。禁止修改`需求.md`.
9. 如果你需要图片支持，请给我反馈，告诉我需要什么图片。如果你使用了我给你的图片，记得把图片名改为一个可读的名字，便于后期维护。

## 页面树
```json
{
   "MainActivity": [
      "HomeTab", 
      "VideoTab",
      "ChatTab",
      "CartTab",
      "MeTab"
   ],
   "HomeTab": [
      "ProductDetailActivity",
      "SearchActivity"
   ],
   "ProductDetailActivity": [
      "ProductSpecDialog"
   ],
   "ProductSpecDialog": [
      "SettleActivity"
   ],
   "SearchActivity": [
      "SearchResultActivity"
   ],
   "ChatTab": [
      "MessageDetailActivity"
   ],
   "MeTab": [
      "OrderActivity"
   ]
}

```

## 已完成的页面
'''
1. HomeTab
2. ChatTab
3. CartTab
4. MeTab
5. ProductDetailActivity
6. ProductSpecDialog
7. OrderActivity
8. SettleActivity
'''

## 可参考的截图
1. UIReference/MessageDetailActivity参考.png

## 三、MessageDetailActivity 页面开发要求（消息详情页）

### 你当前的任务
实现 `MessageDetailActivity` 页面，用于展示用户与商家/客服之间的聊天详情。页面需支持发送文本消息功能（对方无需回复），并根据不同聊天对象展示对应的历史消息记录，模拟真实聊天场景。

---

### 页面要素
1. **顶部导航栏**
    - 返回按钮（←）
    - 聊天对象头像与名称（如：“京东客服”、“得力文具旗舰店客服”等）
    - 右侧设置图标（点击无功能，仅展示）

2. **聊天消息区**
    - 使用 `RecyclerView` 实现，按时间顺序展示；
    - 每条消息包括：
        - 头像（左侧为对方，右侧为自己）
        - 聊天气泡框（背景颜色区分双方）
        - 文字消息内容
        - 发送时间（可选显示）

   **消息类型：**
    - 文本消息（用户发送 / 对方回复）
    - 系统提示消息（如“订单已退款成功”、“请耐心等待退款到账”等）
    - 商品信息卡片（含图片、商品名、价格，可点击进入商品详情页）

3. **底部输入栏**
    - 输入框（提示语：“请输入您要咨询的内容…”）
    - 发送按钮（点击后添加到消息列表并自动滚动到底部）
    - 语音按钮、快捷按钮、表情按钮（仅展示UI，不实现逻辑）

4. **快捷功能栏（仿京东）**
    - 位于输入框上方，横向滚动；
    - 包含常见快捷功能按钮，如：
        - 发订单
        - 申请价保
        - 什么时间配送
        - 我要退换货
    - 点击后仅弹出 Toast 提示（“功能开发中”）

---

### 功能要求
1. **进入页面**
    - 从消息列表（MessageListActivity）点击任意会话进入；
    - 通过 Intent 传入聊天对象信息（头像、名称、ID）；
    - 根据聊天对象加载对应历史消息（模拟从本地 JSON 文件读取）。

2. **消息加载与展示**
    - 从本地 `messages.json` 读取数据；
    - 数据结构如下：

    ```json
    {
      "conversations": [
        {
          "id": "C20251021001",
          "chatName": "京东客服",
          "chatAvatar": "drawable/jd_service.png",
          "messages": [
            {
              "sender": "other",
              "type": "text",
              "content": "您好，智能客服助手为您服务！"
            },
            {
              "sender": "user",
              "type": "text",
              "content": "我想问一下退款到账时间？"
            },
            {
              "sender": "other",
              "type": "text",
              "content": "您的退款已成功，预计1-3个工作日到账，请耐心等待。"
            },
            {
              "sender": "other",
              "type": "system",
              "content": "京东已退款成功，款项将原路退回。"
            }
          ]
        },
        {
          "id": "C20251021002",
          "chatName": "得力文具旗舰店",
          "chatAvatar": "drawable/deli_service.png",
          "messages": [
            {
              "sender": "other",
              "type": "text",
              "content": "您好，请问您是想咨询哪款商品？"
            },
            {
              "sender": "user",
              "type": "text",
              "content": "得力台灯还在保修期内吗？"
            },
            {
              "sender": "other",
              "type": "text",
              "content": "台灯提供1年保修服务，您可提供订单号，我们帮您核实。"
            }
          ]
        }
      ]
    }
    ```

3. 消息发送
    - 用户在输入框输入文本后点击“发送”； 
    - 新消息立即添加到消息列表底部； 
    - 清空输入框； 
    - 模拟延迟0.5秒滚动到底部； 
    - 对方无需回复。
4. 商品消息展示 
    - 若消息类型为“商品卡片”，展示： 
        商品图片
        商品名称
        商品价格
        “查看详情”按钮（点击跳转至 ProductDetailActivity）
5. 交互反馈
   - 点击“发送”后未输入内容则提示：“请输入消息内容”； 
   - 所有功能按钮（除发送外）均提示：“功能开发中”； 
   - 页面进入与返回均保持滑动动画一致。

### UI布局要求
1. 整体风格
    - 聊天区背景浅灰色； 
    - 自己消息气泡：右侧红色背景+白色文字； 
    - 对方消息气泡：左侧白色背景+黑色文字； 
    - 系统提示消息：居中灰色小字； 
    - 商品卡片圆角、阴影； 
    - 时间字体小且灰色。
2. 输入区域
   - 背景白色，固定在底部； 
   - 发送按钮红色填充圆角矩形； 
   - 输入框自动换行； 
   - 保持键盘弹出时列表自动上移。
3. 快捷功能栏
   - 使用 HorizontalScrollView 实现； 
   - 每个按钮圆角、带浅红边框； 
   - 点击高亮并显示 Toast。

### 文件结构建议
app/
└─ src/
    └─ main/
        ├─ java/com/example/test05/message/
        │   ├─ MessageDetailActivity.kt
        │   ├─ MessageDetailContract.kt
        │   ├─ MessageDetailPresenter.kt
        │   ├─ MessageAdapter.kt
        │   ├─ MessageModel.kt
        │   └─ ChatDataLoader.kt
        └─ res/layout/
            ├─ activity_message_detail.xml
            ├─ item_message_left.xml
            ├─ item_message_right.xml
            ├─ item_message_system.xml
            ├─ item_message_product.xml
            └─ layout_quick_action_bar.xml

### 注意事项
1. Presenter 负责加载消息、添加消息、滚动控制逻辑； 
2. View 层仅负责展示消息与接收输入； 
3. 所有消息存储在内存中，不需持久化； 
4. 页面退出后不保存用户输入； 
5. 预留扩展接口以便后续加入AI客服回复功能。

### UI参考说明
仅参考排版、布局与交互风格；
聊天对象、金额、商品信息等仅作示例；
实际内容从 messages.json 中加载并扩展为符合真实聊天逻辑的内容，一定要扩展每一个聊天。